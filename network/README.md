# Network
Модуль для работы с сетью. Содержит классы для быстрой настройки работы с сетью на основе Retrofit + OkHttp. 
Позволяет легко настроить кеширование сырых ответов сервера используя [filestorage](../filestorage/README.md)

## Использование

### Cache
Простой кеш сохраняет сырые ответы сервера в файлы. Для использования неоходимо создать 
`SimpleCacheInterceptor` и добавить его в конструктор при создании инстанса `OkHttpClient`. Кешированные данные получают через тот же интерфейс Api, который используется Retrofit'ом. Для поддержки кеширования метод в интерфейсе должен выглядеть так: 
```
@GET(SOME_URL)
Observable<SomeResponse> getSomeContent(
            @Header(HEADER_QUERY_MODE) @ServerConstants.QueryMode int queryMode,
            @Path("id") int id);
```
Кроме того необходимо иметь инстанс класса SimpleCacheInfo для этого запроса. В зависимомти от queryMode данные будут запрошены либо с сервера либо из кеша.


### CallAdapter
Конвертирует ответы сервера в `Observable` а также оборачивает ошибки в соответветствующий инстанс иерархии `NetworkException`

### Error
Предоставляет набор исключений для часто возникабщих ошибок при работе с сетью. Все ошибки имеют общего предка - `NetworkException`

### Etag
Предоставляет поддержку механизма Etag. Для использования неоходимо
`EtagInterceptor` добавить в контсруктор при создании инстанса `OkHttpClient`

### Response
`BaseResponse` маркерный интерфейс который обозначает классы которые используются для парсинга корневой сущности ответа

### Прочее
`BaseNetworkInteractor` Интерактор для работы с сетью. Основная задача упростить взаимодейстивие с закешированными ответами и ответами сервера 
`Transformable` и `TransformableUtil` Интрефейс и набор утилит для конвертации объекта одного класса в другой

# Подключение
## Пример
[Пример использования](../network-sample)

#Подключение
Gradle:
```
    implementation "ru.surfstudio.android:network:X.X.X"
```

TODO: Отрефакториить поиск SimpleCacheInfo по url, описать подробнее доки, добавить семпл
