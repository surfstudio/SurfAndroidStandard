# Пагинация

Пагинация(постраничная загрузка данных) может быть реализована двумя механизмами:
- limit-offset - известен размер блока данных и смещение относительно самого
первого элемента

- page-count - известен размер страницы и ее номер.

Выбор какой механизм использовать обусловлен скорее серверной стороной.

#### Структура данных
Для поддержки пагинации на клиенте предусмотрены структуры данных,
предоставляемые одним из следующих модулей:
- [datalist-limit-offset](../../datalist-limit-offset/README.md);
- [datalist-page-count](../../datalist-page-count/README.md).


#### Организация запроса

Сам пагинируемый запрос ничем не отличается от обычного. Конкретная реализация
будет также зависеть от сервера.

#### Отображение на UI

При пагинации в вертикальных списках и сетках используется футер с состоянием загрузки
(лоадером) и состоянием ошибки. Для удобной и быстрой реализации такого
списка предусмотрен специальный адаптер из модуля [easyadapter](../../easyadapter/README.md).

#### Существующие проблемы

На данный момент существуют несколько проблем с пагинацией на клиенте:

- Список с разнородными элементами. Например, список некоторых позиций онлайн-магазина,
в который надо включать промоакции. *Возможное решение*: использовать для этих
элементов разные [контроллеры][control] и прогружать список акций заранее. Тогда можно будет
распределить акции по списку на UI, не нарушая общий порядок пагинации.

- При перезагрузке нескольких страниц могут возникнуть определенные
  проблемы(например со стороны сервера, если на нем стоит ограничение на количество
  единовременно отдаваемых страниц). Поэтому следует использовать утилиты, которые
  разобьют текущий запрос на блоки по страницам. Такие утилиты есть в каждом
  модуле с DataList.

- Чат. Необходимо отобразить наше сообщение, которое только что написали,
но - оно еще не получено в списке с сервера.

#### Пример реализации

Пример реализации пагинируемой загрузки в приложении представлен [здесь](../../network-sample/docs/pagin_sample.md).
Демонстрационный пример с двумя механизмами пагинации [здесь](../../easyadapter-sample/README.md).

[control]: ../../easyadapter/README.md
[cache]: ../../network/README.md